# 网络安全

## XSS（Cross Site Scripting，跨站脚本攻击）

### 描述

简单来讲就是通过某种方式向你的代码中注入 js 代码，  
最常见的是通过表单的提交。  
然后因为这些代码与你的代码具有同等的权限，因此可以访问到你的数据信息，也可以进行一些数据的上报。因此，危害是很大的。

### 解决方案

- 针对一些输入的内容进行替换
- 另外针对性的对 cookie 加强控制，设置 http-only,这样 js 就获取不到 cookie 的内容。
- 但是，针对富文本内容，简单的文本替换并不能解决问题，可以通过 csp 的方式解决，也就是建立白名单。

## CSRF（Cross-site request forgery，跨站请求伪造）

### 描述

CSRF 是借用了当前操作者的权限来偷偷地完成某个操作，而不是拿到用户的信息。

其借助的原理是：cookie 的同源策略，只要登录之后，同域名的请求都不需要进行用户的验证。

### 解决方案

- 针对需要进行校验的操作，设置额外的验证，比如验证码、密码、指纹等；
- get 请求改为 post 请求，更加安全；让 get 请求更多的只负责读操作；
- 验证 document.referer,判断网页的上一个页面来源，微信支付就有这个验证的机制；
- token 时效性机制，在进行某操作时，发送一个时效性的 token，在进行某操作后续操作时，验证 token 是否相同；
- 验证网络 ip，因为如果是非本机设备发起的请求，那么 ip 也会相比原来的 ip 是不同的，通过 ip 的对比也可以去除不安全的因素。

## 网页嵌套攻击

### 描述

通过 iframe 嵌套网站的页面，然后设计嵌套透明化，通过界面点击时，触发自己的事件。

### 解决方案

- 第一种： header 设置不允许 iframe 嵌套

```
X-FRAME-OPTIONS 是一个 HTTP 响应头，在现代浏览器有一个很好的支持。这个 HTTP 响应头 就是为了防御用 iframe 嵌套的点击劫持攻击。

该响应头有三个值可选，分别是

DENY ，表示页面不允许通过 iframe 的方式展示
SAMEORIGIN ，表示页面可以在相同域名下通过 iframe 的方式展示
ALLOW-FROM ，表示页面可以在指定来源的 iframe 中展示
```

- 第二种：我们可以通过简单的 js 去判断当前界面是不是顶层窗口就可以解决这种问题了

```js
if(top.location!=self.location){
        top.location.href = window.location.href;
    }else{
        alert("是顶层窗口")；
}
```

## 中间人攻击

### 描述

也就是请求被拦截，然后可能被改写，或者被抽取重要信息，继续继续请求

### 解决方案

简单有效的：升级 https 方案

## sql 注入

### 描述

就是后端依赖前端返回的参数直接拼接 sql 进行查询数据，导致 sql 不正常的拼接，造成的安全问题

### 解决方案

对前端传递的信息进行层层校验，不直接使用。

[参考 1- 安全常识](https://zhuanlan.zhihu.com/p/147907139)  
[参考 2- 安全大全](https://www.jianshu.com/p/544bb4bccd82)
